<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="//"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,maximum-scale=5,viewport-fit=cover"><meta name="renderer" content="webkit"><title>使用 GitHub Actions 自动部署 Hexo | Lufs&#39;s Blog</title><link rel="icon" type="image&#x2F;ico" href="https://cdn.isteed.cc/favicon/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="https://cdn.isteed.cc/favicon/apple-touch-icon.png"><link rel="icon" typt="image&#x2F;png" sizes="192x192" href="https://cdn.isteed.cc/favicon/android-chrome-192x192.png"><link rel="icon" typt="image&#x2F;png" sizes="32x32" href="https://cdn.isteed.cc/favicon/favicon-32x32.png"><link rel="icon" typt="image&#x2F;png" sizes="16x16" href="https://cdn.isteed.cc/favicon/favicon-16x16.png"><link rel="mask-icon" href="https://cdn.isteed.cc/favicon/safari-pinned-tab.svg" color="rgba(241,249,250,1)"><meta name="theme-color" content="rgba(241,249,250,1)"><link rel="stylesheet" href="https://cdn.isteed.cc/file/spectre.min.css"><style>body{background-color:#f1f9fa}a,a:visited{color:#8f82bc}a:active,a:focus,a:hover{color:#8f82bc;opacity:.75}#post-content a,#post-content a:focus,#post-content a:hover,#post-content a:visited{color:#8f82bc;opacity:1}#post-content img.lazy{transition:filter .35s ease 0s}#post-content img.lazy:not(.loaded){visibility:hidden;-webkit-filter:blur(5px);filter:blur(5px)}#post-content img.lazy:not(.loaded):not(.loading){padding-bottom:68%}#post-content img.lazy.error{display:none}.post-entry .card-body a{color:#7065a3}.avatar{background:#7065a3}.navbar-link,.navbar-link:visited,.timeline .timeline-item .timeline-icon.icon-lg{color:#7065a3}.navbar-link:hover{color:#7065a3;opacity:.8}#disqus-loadmore-button,#disqus-switch-to-direct,#disqus_click_btn,#search-input .btn{background:#7065a3;border-color:#7065a3;color:#fff}#post-toc a.post-toc-link,#post-toc a.post-toc-link:visited,.share-menu.menu .menu-item>a{color:#7065a3}.share-menu.menu .menu-item>a:focus,.share-menu.menu .menu-item>a:hover,.share-menu.menu .menu-item>a:visited{color:#50596c;background:#f1f9fa;opacity:.85}</style><link rel="stylesheet" href="https://cdn.isteed.cc/file/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/gh/lufsx/res@0.1.4/file/disqusjs.min.css" as="style" onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lufsx/res@0.1.4/file/disqusjs.min.css"></noscript><link rel="preload" href="https://cdn.isteed.cc/file/atom-one.min.css" as="style" onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel="stylesheet" href="https://cdn.isteed.cc/file/atom-one.min.css"></noscript><script>/*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
!function(t){"use strict";t.loadCSS||(t.loadCSS=function(){});var e=loadCSS.relpreload={};if(e.support=function(){var e;try{e=t.document.createElement("link").relList.supports("preload")}catch(t){e=!1}return function(){return e}}(),e.bindMediaToggle=function(t){var e=t.media||"all";function a(){t.addEventListener?t.removeEventListener("load",a):t.attachEvent&&t.detachEvent("onload",a),t.setAttribute("onload",null),t.media=e}t.addEventListener?t.addEventListener("load",a):t.attachEvent&&t.attachEvent("onload",a),setTimeout((function(){t.rel="stylesheet",t.media="only x"})),setTimeout(a,3e3)},e.poly=function(){if(!e.support())for(var a=t.document.getElementsByTagName("link"),n=0;n<a.length;n++){var o=a[n];"preload"!==o.rel||"style"!==o.getAttribute("as")||o.getAttribute("data-loadcss")||(o.setAttribute("data-loadcss",!0),e.bindMediaToggle(o))}},!e.support()){e.poly();var a=t.setInterval(e.poly,500);t.addEventListener?t.addEventListener("load",(function(){e.poly(),t.clearInterval(a)})):t.attachEvent&&t.attachEvent("onload",(function(){e.poly(),t.clearInterval(a)}))}"undefined"!=typeof exports?exports.loadCSS=loadCSS:t.loadCSS=loadCSS}("undefined"!=typeof global?global:this)</script><meta name="google-site-verification" content="wk686q2aTrts7GR0yVJ7UrALaAodD62StMuSuH7dMOU"><meta name="mobile-web-app-capable" content="yes"><meta name="application-name" content="Lufs's Blog"><meta name="msapplication-starturl" content="https://blog.isteed.cc"><meta name="msapplication-navbutton-color" content="rgba(241,249,250,1)"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Lufs's Blog"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link rel="search" type="application/opensearchdescription+xml" href="/source/opensearch.xml" title="Lufs's Blog"><meta property="og:title" content="使用 GitHub Actions 自动部署 Hexo | Lufs&#39;s Blog"><meta property="og:site_name" content="Lufs&#39;s Blog"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.isteed.cc/post/hexo-github-action/"><meta property="og:locale" content="zh-CN"><meta name="description" content="这是已经老久前挖的坑，现在看来是要填了 🤣 使用 CI 有啥好处呢？ 随时随地，开个网页，只要分支有 push 便会自动构建、部署博客～ 高集成，所有用到的东西都不用离开 github.com - Lufs - Lufs&#39;s Blog"><meta name="keywords" content="GitHub Actions, Hexo, 博客, Now.sh, Lufs, Lufs Blog, Hexo, hexo, Android, blog, 水怪"><meta property="og:image" content="https://cdn.isteed.cc/img/hexo-github-action/thumbnail.webp"><meta property="og:image" content="https://cdn.isteed.cc/img/hexo-github-action/prepare_1.webp"><meta property="og:image" content="https://cdn.isteed.cc/img/hexo-github-action/prepare_2.webp"><meta property="og:image" content="https://cdn.isteed.cc/img/hexo-github-action/prepare_3.webp"><meta property="og:image" content="https://cdn.isteed.cc/img/hexo-github-action/prepare_4.webp"><meta property="og:image" content="https://cdn.isteed.cc/img/hexo-github-action/broken.webp"><meta property="article:published_time" content="2020-05-03T15:00:00.000Z"><meta property="article:modified_time" content="2020-08-31T06:00:53.000Z"><meta property="og:updated_time" content="2020-08-31T06:00:53.000Z"><meta property="article:author" content="Lufs"><meta property="article:tag" content="GitHub Actions, Hexo, 博客, Now.sh, Lufs, Lufs Blog, Hexo, hexo, Android, blog, 水怪"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://cdn.isteed.cc/img/hexo-github-action/thumbnail.webp"><link rel="canonical" href="https://blog.isteed.cc/post/hexo-github-action/"><meta name="generator" content="Hexo 6.3.0"><script>!function(e,t,n,a,c,r,s){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},(r=t.createElement(a)).async=1,r.src="https://www.clarity.ms/tag/alejvn2b9x",(s=t.getElementsByTagName(a)[0]).parentNode.insertBefore(r,s)}(window,document,"clarity","script")</script><script type="application/ld+json">{
    "@context": "http://schema.org",
    "url": "https://blog.isteed.cc/post/hexo-github-action/",
    "@type": "BlogPosting",
    "logo": "https://cdn.isteed.cc/favicon/android-chrome-192x192.png",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://blog.isteed.cc/post/hexo-github-action/"
    },
    "headline": "使用 GitHub Actions 自动部署 Hexo | Lufs&#39;s Blog",
    
    "image": {
        "@type": "ImageObject",
        "url": "https://cdn.isteed.cc/img/hexo-github-action/thumbnail.webp"
    },
    
    "datePublished": "2020-05-03T15:00:00.000Z",
    "dateModified": "2020-08-31T06:00:53.000Z",
    "author": {
        "@type": "Person",
        "name": "Lufs",
        "image": {
            "@type": "ImageObject",
            "url": "https://cdn.isteed.cc/avatar/avatar-48x48.webp"
        },
        "description": "Life feeds on negative entropy."
    },
    "publisher": {
        "@type": "Organization",
        "name": "Lufs&#39;s Blog",
        "logo": {
            "@type": "ImageObject",
            "url": "https://cdn.isteed.cc/favicon/android-chrome-192x192.png"
        }
    },
    
    "potentialAction": {
        "@type": "SearchAction",
        "target": "https://blog.isteed.cc/search?s={search_term_string}",
        "query-input": "required name=search_term_string"
    },
    
    "keywords": "GitHub Actions, Hexo, 博客, Now.sh, Lufs, Lufs Blog, Hexo, hexo, Android, blog, 水怪",
    "description": "这是已经老久前挖的坑，现在看来是要填了 🤣 使用 CI 有啥好处呢？ 随时随地，开个网页，只要分支有 push 便会自动构建、部署博客～ 高集成，所有用到的东西都不用离开 github.com - Lufs - Lufs&#39;s Blog"
}</script><link rel="stylesheet" href="https://cdn.isteed.cc/file/dark.min.css" media="(prefers-color-scheme:dark)" crossorigin><script>"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/sw.js").then((function(e){console.log("Yay! ServiceWorker is loaded 🎉")}),(function(e){console.log("Oh! ServiceWorker registration failed 😥")}))}))</script><script>console.log("\n %c Lufs's Blog %c https://blog.isteed.cc/ \n","color: #fff; background: #7065a3; padding:5px 0;","background: #f0fafb; padding:5px 0;"),console.log("%c ","background:url(data:image/png;base64,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) no-repeat center;background-size:200px;padding-left:200px;padding-bottom:162px;overflow:hidden;border-radius:10px;margin:5px 0")</script><link rel="alternate" href="/atom.xml" title="Lufs's Blog" type="application/atom+xml"><link rel="alternate" href="/rss2.xml" title="Lufs's Blog" type="application/rss+xml"></head><body><header><h1 class="header-title text-center"><a href="/">Lufs&#39;s Blog</a></h1><p class="text-center header-slogan">Life feeds on negative entropy.</p><nav class="navbar-section text-center"><a href="/" class="navbar-link">首页</a> <a href="/archives/" class="navbar-link">归档</a> <a href="/search" class="navbar-link">搜索</a> <a href="/welfare/" class="navbar-link">福利</a> <a href="/post/about/" class="navbar-link">关于</a> <a target="_blank" rel="noopener" href="https://isteed.cc/friend" class="navbar-link">友链</a></nav></header><div class="post-container"><div id="post-card" class="card"><div class="card-image lazy" crossorigin data-bg="https://cdn.isteed.cc/img/hexo-github-action/thumbnail.webp"></div><div class="card-item-container"><div class="card-inner-cell"><div class="card-header"><h1 class="card-title h3 mb-2">使用 GitHub Actions 自动部署 Hexo</h1><div class="post-header-info"><p class="post-header-info-left text-gray"><img class="author-thumb lazy" data-src="https://cdn.isteed.cc/avatar/avatar-48x48.webp" src="https://cdn.isteed.cc/img/svg/loading.svg" alt="Lufs's Avatar"> <span>2020-05-03</span> <span class="suka-devide-dot"></span> <a class="category-link" href="/categories/%E5%88%86%E4%BA%AB/">分享</a></p><div class="post-header-info-right"><div class="dropdown dropdown-right"><a class="dropdown-toggle" tabindex="0">分享本文</a><ul class="menu share-menu"><li class="menu-item"><a href="http://service.weibo.com/share/share.php?appkey=&title=使用 GitHub Actions 自动部署 Hexo&url=https://blog.isteed.cc/post/hexo-github-action/&pic=https://cdn.isteed.cc/img/hexo-github-action/thumbnail.webp&searchPic=false&style=simple" target="_blank" rel="external noopener noreferrer nofollow">分享到微博</a></li><li class="menu-item"><a href="http://connect.qq.com/widget/shareqq/index.html?site=Lufs's Blog&title=Lufs's Blog&summary=Life feeds on negative entropy.&pics=https://cdn.isteed.cc/img/hexo-github-action/thumbnail.webp&url=https://blog.isteed.cc/post/hexo-github-action/" target="_blank" rel="external noopener noreferrer nofollow">分享到 QQ</a></li><li class="menu-item"><a href="https://t.me/share/url?url=https://blog.isteed.cc/post/hexo-github-action/&text=Lufs's Blog" target="_blank" rel="external noopener noreferrer nofollow">分享到 Telegram</a></li><li class="menu-item"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJQAAACUCAAAAABQV18IAAAB40lEQVR42u3by67CMAyE4b7/S5+zQkIonhkXFon7d4PUcvkquYnthOtvw+MCBQoUqAXqEsfn9eozr3Pv11fn1O+AmoVaBt3H+RU0ub4CVr8DahZKBa5CdoNevhfUI1AquNX5KqBBgVIDYhLUoJ6LUoG5GjATsBp8v8oSQG2PSibXX7z+tJoBtS0qmUirQkHdmArur7suoLZGVT9WYdR7XUBXzRJQs1Cu4HRJXdJUU4WsffpAHYdSAZo0N1QSpwrY5feCGoFafdg1VFUR4JJE+WCBGoNKJuMO0BWw5U2BGo1KiwM3MbeauqDGoNyiohoo3cJQ5yEBNQOVLFgnjfr0urxRUCNQSRCnyVqnkRsneaCORN1J9t1Ct9t4EY/ooI5Fpcm/20ToNunIBUlQY1AOlGziqh6AJOBBzUIliz5u0Euas6rZD2oeyjXyk+IzWXCyG1pBjUAli0KdRoa7kVY1A+polGueJV+eLGa3swRQx6HSpC3ZjKoWiG5NyKCORHU2CnYH2M4ED2oOKv0ja7LwnSZ60a4gUEej0k2DdxGuQQdqJsr9USfdLN9ttoF6HspNrMmknSZ7oJ6FSoqIu4UqqJmodNEoCdpkoymo2aikcEiKys7ku7x5UCNQOx2gQIEC9Xb8A3jMf07Gduy/AAAAAElFTkSuQmCC" alt="QRCode"></li></ul></div></div></div></div><div class="card-body"><div id="post-toc"><ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#%E5%B7%A5%E5%85%B7"><span class="post-toc-number">1.</span> <span class="post-toc-text">工具</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#%E5%87%86%E5%A4%87"><span class="post-toc-number">2.</span> <span class="post-toc-text">准备</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E7%AB%99%E7%82%B9%E5%87%86%E5%A4%87"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">站点准备</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#GitHub-%E5%87%86%E5%A4%87"><span class="post-toc-number">3.</span> <span class="post-toc-text">GitHub 准备</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#workflows"><span class="post-toc-number">4.</span> <span class="post-toc-text">workflows</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E8%BF%87%E7%A8%8B%E8%A7%A3%E9%87%8A"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">过程解释</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E6%89%A9%E5%B1%95"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">扩展</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#%E6%88%90%E5%93%81"><span class="post-toc-number">5.</span> <span class="post-toc-text">成品</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#%E7%A2%8E%E7%A2%8E%E5%BF%B5"><span class="post-toc-number">6.</span> <span class="post-toc-text">碎碎念</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5"><span class="post-toc-number">7.</span> <span class="post-toc-text">参考链接</span></a></li></ol></div><article id="post-content"><p>这是已经老久前挖的坑，现在看来是要填了 🤣</p><p>使用 CI 有啥好处呢？</p><p>随时随地，开个网页，只要分支有 push 便会自动构建、部署博客～</p><p>高集成，所有用到的东西都不用离开 <a target="_blank" rel="noopener external nofollow noreferrer" href="http://github.com">github.com</a></p><span id="more"></span><h1 id="工具">工具</h1><ul><li>GitHub 账号一枚</li><li>Git</li><li>NodeJS</li></ul><h1 id="准备">准备</h1><h2 id="站点准备">站点准备</h2><p>首先肯定先安装个 Hexo 啦</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br></pre></td></tr></table></figure><p>然后在一个空文件夹下 执行</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure><p>然后按照喜好配置你的 Hexo 站点～</p><p>最后在 GitHub 上创建一个 GitHub Pages 仓库和一个 Hexo 博客文件仓库/分支（</p><p>（说一下，个人主题是 Fork 了一份稍微改了一下，然后 git submodule 挂上去的说，所以 workflow 中有同步子模块的一步）</p><h1 id="GitHub-准备">GitHub 准备</h1><p>打开 <a target="_blank" rel="noopener external nofollow noreferrer" href="http://github.com">github.com</a></p><p>在 <code>Settings</code> - <code>Developer settings</code> - <code>Personal access tokens</code> - <code>Generate new token</code> 中创建密钥</p><p><img src="https://cdn.isteed.cc/img/hexo-github-action/prepare_1.webp" class="lazy" data-srcset="https://cdn.isteed.cc/img/hexo-github-action/prepare_1.webp" srcset="https://cdn.isteed.cc/img/svg/loading.svg" alt="prepare"></p><p>然后勾选 <code>repo</code>，拉到最下面，<code>Generate toker</code></p><p><img src="https://cdn.isteed.cc/img/hexo-github-action/prepare_2.webp" class="lazy" data-srcset="https://cdn.isteed.cc/img/hexo-github-action/prepare_2.webp" srcset="https://cdn.isteed.cc/img/svg/loading.svg" alt="prepare"></p><p>最后将生成的 token 保存下来（只会<strong>出现一次</strong>，一定一定记得存下来！</p><p><img src="https://cdn.isteed.cc/img/hexo-github-action/prepare_3.webp" class="lazy" data-srcset="https://cdn.isteed.cc/img/hexo-github-action/prepare_3.webp" srcset="https://cdn.isteed.cc/img/svg/loading.svg" alt="prepare"></p><hr><p>接下来在你 Hexo 博客文件仓库/分支所在的仓库 的 <code>Settings</code> - <code>Secrets</code> - <code>Add a new secret</code> 创建俩个变量分别是</p><p><code>GH_REF</code> 内容为你 GitHub Pages 仓库的地址（不用带 https<br><code>GH_TOKEN</code> 内容为上面所获取的 token</p><p><img src="https://cdn.isteed.cc/img/hexo-github-action/prepare_4.webp" class="lazy" data-srcset="https://cdn.isteed.cc/img/hexo-github-action/prepare_4.webp" srcset="https://cdn.isteed.cc/img/svg/loading.svg" alt="prepare"></p><p>至此，就差不多准备好了 😋</p><h1 id="workflows">workflows</h1><p>如果只是要个 workflows 的话，<a href="#%e6%88%90%e5%93%81">点我跳转到成品</a></p><h2 id="过程解释">过程解释</h2><ol><li>名称，这个随意取</li></ol><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Hexo</span></span><br></pre></td></tr></table></figure><ol start="2"><li>指定触发 workflow 的事件，这里选择的是推送至指定分支的事件</li></ol><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span> <span class="comment"># 这里是推送事件</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">master</span> <span class="comment"># 这里指定了推送的分支</span></span><br></pre></td></tr></table></figure><ol start="3"><li>设置时区，这里设置的是上海的呢</li></ol><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">env:</span></span><br><span class="line">  <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br></pre></td></tr></table></figure><ol start="4"><li>指定 workflow 所运行的系统，这里是设置最新的 Ubuntu</li></ol><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">blog-cicd:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">Hexo</span> <span class="string">build</span> <span class="string">and</span> <span class="string">deploy</span></span><br><span class="line">  <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br></pre></td></tr></table></figure><ol start="5"><li>检出代码，设置 Node 环境</li></ol><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">codes</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">    <span class="attr">with:</span></span><br><span class="line">      <span class="attr">submodules:</span> <span class="string">&quot;true&quot;</span> <span class="comment"># 如需同步子模块，请取消注释</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">node</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">actions/setup-node@v1.1.0</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">version:</span> <span class="string">&quot;12.x&quot;</span> <span class="comment"># Node 的版本</span></span><br></pre></td></tr></table></figure><ol start="6"><li><s>同步主题，我这里是 Fork 了一份主题并添加成了子模块的说，如果没有使用子模块的话，这一步可以忽略</s></li></ol><p>请看 <code>5.</code> 的注释</p><p>如果你的主题未做修改的话，那你可以直接 git clone 下来使用，在 <code>.gitignore</code> 中添加忽略（当然，你直接在仓库中存在也行，不过那样的话看目录结构会复杂一点）</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">submodules</span></span><br><span class="line">  <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">    auth_header=&quot;$(git config --local --get http.https://github.com/.extraheader)&quot;</span></span><br><span class="line"><span class="string">    git submodule sync --recursive</span></span><br><span class="line"><span class="string">    git -c &quot;http.extraheader=$auth_header&quot; -c protocol.version=2 submodule update --init --force --recursive --depth=1</span></span><br></pre></td></tr></table></figure><ol start="7"><li>缓存 <code>~/.npm</code> 目录，加快构建速度</li></ol><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Cache</span> <span class="string">Node</span> <span class="string">Dependencies</span> <span class="comment"># Npm 缓存，这一步报错的话，把这部分删掉即可</span></span><br><span class="line">  <span class="attr">id:</span> <span class="string">cache</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">actions/cache@v2</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">~/.npm</span></span><br><span class="line">    <span class="attr">key:</span> <span class="string">$&#123;&#123;runner.OS&#125;&#125;-npm-caches-$&#123;&#123;</span> <span class="string">hashFiles(&#x27;package-lock.json&#x27;)</span> <span class="string">&#125;&#125;</span></span><br></pre></td></tr></table></figure><ol start="8"><li>安装依赖，个人使用的主题也需要安装一次，但大部分主题不需要安装，这里便没有贴出</li></ol><p>如果主题需要安装依赖的话，<code>cd</code> 过去安装即可（Ubuntu 环境～</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">dependencies</span></span><br><span class="line">  <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">    npm install hexo-cli -g</span></span><br><span class="line"><span class="string">    npm install</span></span><br><span class="line"><span class="string">    # cd /theme/name</span></span><br><span class="line"><span class="string">    # npm install</span></span><br></pre></td></tr></table></figure><ol start="9"><li>生成文件，我主题是挂子模块的，子模块中我不想它出现配置，所以这里有个 <code>mv</code> 操作将目录下的 <code>_config.theme.yml</code> 移动并重命名为 <code>_config.yml</code></li></ol><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Generate</span> <span class="string">files</span></span><br><span class="line">  <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="comment">#    mv ./_config.theme.yml ./themes/themename/_config.yml</span></span><br><span class="line">    <span class="string">hexo</span> <span class="string">generate</span></span><br></pre></td></tr></table></figure><ol start="10"><li>部署到到 GitHub Pages 仓库</li></ol><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">blog</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">peaceiris/actions-gh-pages@v3</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">personal_token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GH_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">external_repository:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GH_REF</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">publish_branch:</span> <span class="string">master</span></span><br><span class="line">    <span class="attr">publish_dir:</span> <span class="string">./public</span></span><br><span class="line">    <span class="attr">full_commit_message:</span> <span class="string">GitHub</span> <span class="string">Actions</span> <span class="string">Auto</span> <span class="string">Builder</span></span><br><span class="line">    <span class="attr">disable_nojekyll:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="扩展">扩展</h2><p>由于个人将 GitHub Pages 仓库也绑定到 <a target="_blank" rel="noopener external nofollow noreferrer" href="http://Now.sh">Now.sh</a> 了，所以需要添加 <code>now.json</code> 设置 404 页面（本博客的 <a target="_blank" rel="noopener external nofollow noreferrer" href="http://Now.sh">Now.sh</a> 域名 <a href="http://blog.isteed.cc">blog.isteed.cc</a>）（其它的规则懒得整～</p><p>所以我将 now.json 文件存储到博客源文件的根目录下，在生成文件后将其移动过去</p><p>这样的话，我觉得也可以做个双线部署用用，coding 似乎使用的是新加坡腾讯云，而 <a target="_blank" rel="noopener external nofollow noreferrer" href="http://Now.sh">Now.sh</a> 则有香港、台湾谷歌云，速度蛮快的说（注: <a target="_blank" rel="noopener external nofollow noreferrer" href="http://Now.sh">Now.sh</a> 有流量限制，不过应对我这种博客没啥人的还是够了 🤣）</p><h1 id="成品">成品</h1><p>最后的 workflow</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Hexo</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">master</span></span><br><span class="line"></span><br><span class="line"><span class="attr">env:</span></span><br><span class="line">  <span class="attr">TZ:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">blog-cicd:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">Hexo</span> <span class="string">build</span> <span class="string">and</span> <span class="string">deploy</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">codes</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">submodules:</span> <span class="string">&#x27;true&#x27;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">node</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v1.1.0</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">version:</span> <span class="string">&quot;12.x&quot;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Cache</span> <span class="string">Node</span> <span class="string">Dependencies</span></span><br><span class="line">        <span class="attr">id:</span> <span class="string">cache</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/cache@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">~/.npm</span></span><br><span class="line">          <span class="attr">key:</span> <span class="string">$&#123;&#123;runner.OS&#125;&#125;-npm-caches-$&#123;&#123;</span> <span class="string">hashFiles(&#x27;package-lock.json&#x27;)</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">dependencies</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          npm install hexo-cli -g</span></span><br><span class="line"><span class="string">          npm install</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Generate</span> <span class="string">files</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="comment">#          mv ./_config.theme.yml ./themes/themename/_config.yml</span></span><br><span class="line">          <span class="string">hexo</span> <span class="string">generate</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">blog</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">peaceiris/actions-gh-pages@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">personal_token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GH_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">external_repository:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.GH_REF</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">publish_branch:</span> <span class="string">master</span></span><br><span class="line">          <span class="attr">publish_dir:</span> <span class="string">./public</span></span><br><span class="line">          <span class="attr">full_commit_message:</span> <span class="string">GitHub</span> <span class="string">Actions</span> <span class="string">Auto</span> <span class="string">Builder</span></span><br><span class="line">          <span class="attr">disable_nojekyll:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h1 id="碎碎念">碎碎念</h1><p>GitHub Actions 真的是太太太好了，那么高配置的服务器，那么强的<strong>国际</strong>带宽，免费用户的私有仓库都有 2000min 的时间用，公开仓库甚至还免费不限时，系统方面不仅有 Ubuntu、Windows 甚至还有 macOS！！！</p><p><img src="https://cdn.isteed.cc/img/hexo-github-action/broken.webp" class="lazy" data-srcset="https://cdn.isteed.cc/img/hexo-github-action/broken.webp" srcset="https://cdn.isteed.cc/img/svg/loading.svg" alt="broken"></p><p>GitHub 牛逼！巨硬牛逼！（希望少点咖喱味</p><h1 id="参考链接">参考链接</h1><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://xirikm.net/2019/826-2.html">昔日的夕阳</a><br><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/features/actions">Github Actions</a><br><a target="_blank" rel="noopener external nofollow noreferrer" href="https://vercel.com/">Vercel</a></p></article><blockquote class="post-license"><p><strong>本文作者&nbsp;:&nbsp;Lufs</strong><br><strong>本文采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载和引用时请注意遵守协议！</strong><br><strong>本文链接&nbsp;:&nbsp;</strong><a href="https://blog.isteed.cc/post/hexo-github-action/">https://blog.isteed.cc/post/hexo-github-action/</a></p></blockquote><blockquote id="date-expire-notification" class="post-expired-notify">本文最后更新于 <span id="date-expire-num"></span> 天前，文中所描述的信息可能已发生改变</blockquote><script>!function(){var e=Date.parse("2020-08-31"),t=(new Date).getTime()-e,n=Math.floor(t/864e5);n>=120?document.getElementById("date-expire-num").innerHTML=n:document.getElementById("date-expire-notification").style.display="none"}()</script><p class="post-footer-info mb-0 pt-0">本文发表于&nbsp;<time datetime="2020-05-03T15:00:00.000Z" itemprop="datePublished">2020-05-03</time> , 最后修改于&nbsp;<time datetime="2020-08-31T06:00:53.000Z" itemprop="dateModified">2020-08-31</time></p><p class="post-footer-info mb-0 pt-2"><span class="post-categories-list mt-2"><a class="post-categories-list-item" href="/categories/%E5%88%86%E4%BA%AB/">分享</a> </span><span class="post-tags-list mt-2"><a class="post-tags-list-item" href="/tags/GitHub-Actions/" rel="tag">#&nbsp;GitHub Actions</a> <a class="post-tags-list-item" href="/tags/Hexo/" rel="tag">#&nbsp;Hexo</a> <a class="post-tags-list-item" href="/tags/%E5%8D%9A%E5%AE%A2/" rel="tag">#&nbsp;博客</a> <a class="post-tags-list-item" href="/tags/Now-sh/" rel="tag">#&nbsp;Now.sh</a></span></p></div><div class="post-nav px-2 bg-gray"><ul class="pagination"><li class="page-item page-prev"><a href="/post/vercel-github-pages/" rel="prev"><div class="page-item-title"><i class="icon icon-back" aria-hidden="true"></i></div><div class="page-item-subtitle">Now.sh 与 GitHub Pages 的双线部署</div></a></li><li class="page-item page-next"><a href="/post/think-changer-of-miui-12/" rel="next"><div class="page-item-title"><i class="icon icon-forward" aria-hidden="true"></i></div><div class="page-item-subtitle">关于 MIUI 12 的瞎吐槽</div></a></li></ul></div><div class="card-footer post-comment"><div id="disqus_thread"></div><script id="js-disqusjs" src="https://cdn.isteed.cc/file/disqus.js" async></script><script>document.getElementById("js-disqusjs").addEventListener("load",(function(){function t(){new DisqusJS({shortname:"lufss-blog",siteName:"Lufs&#39;s Blog",identifier:"https://blog.isteed.cc/post/hexo-github-action/",url:"https://blog.isteed.cc/post/hexo-github-action/",api:"https://api.isteed.cc/disqus/",apikey:"f8sCuFyS82pto94gZ0V4xtPbYZlLej6xVCTPNyZ0CXlfZz25L8lqsnsxYVCPDhzc",admin:"Lufs_x"})}"complete"===document.readyState?t():window.addEventListener("load",t)}))</script></div></div></div></div></div><footer class="text-center"><p class="footer-copyright mb-0">Copyright&nbsp;©&nbsp;<span id="copyright-year"></span> <a class="footer-copyright-a" href="https://blog.isteed.cc">Lufs's Blog</a></p><p class="footer-text mb-0"><a href="/rss2.xml"><img alt="RSS" src="https://cdn.isteed.cc/img/svg/subscribe-via-rss.svg"></a></p><p class="footer-develop mb-0">Powered by&nbsp;<a href="https://hexo.io" target="_blank" class="footer-develop-a" rel="external nofollow noopener noreferrer">Hexo</a><span class="footer-develop-divider"></span>Theme&nbsp;-&nbsp;<a href="https://github.com/SukkaW/hexo-theme-suka" target="_blank" class="footer-develop-a" rel="external noopener">Suka</a></p></footer><script>window.lazyLoadOptions={elements_selector:".lazy",threshold:50},function(){var e=(new Date).getFullYear(),o=document.getElementById("copyright-year");o.textContent=2018===e?e:"2018 - "+e}(),console.log("\n %c Suka Theme (hexo-theme-suka) | © SukkaW | Verision 1.3.3 %c https://github.com/SukkaW/hexo-theme-suka \n","color: #fff; background: #444; padding:5px 0;","background: #bbb; padding:5px 0;")</script><script src="https://cdn.isteed.cc/file/lazyload.iife.min.js" async></script></body></html>